syntax = "proto3";

import "basic.proto";

package network_comms;

service ClientProtocols {
    rpc GetSystemStatus(SystemInfoRequest) returns (SystemInfoResponse);
    rpc CreateFile(CreateFileRequest) returns (CreateFileResponse);
    rpc UpdateFile(UpdateFileRequest) returns (UpdateFileResponse);
    rpc DeleteFile(DeleteFileRequest) returns (DeleteFileResponse);
    rpc ReadFile(ReadFileRequest) returns (ReadFileResponse);
}

// request for node statuses
message SystemInfoRequest {
    ClientInfo client = 1;
}

message CreateFileRequest {
    ClientInfo client = 1;
    FileInfo file_info = 2;
}

message UpdateFileRequest {
    ClientInfo client = 1;
    FileInfo file_info = 2;
}

message DeleteFileRequest {
    ClientInfo client = 1;
    FileInfo file_info = 2;
}

message ReadFileRequest {
    ClientInfo client = 1;
    FileInfo file_info = 2;
}

message SystemInfoResponse {
    NodeStatus namenode = 1;
    repeated NodeStatus nodes = 2;
    int64 num_datanodes = 3;
}

message CreateFileResponse {
    GenericReply response = 1;
    string datanode_addr = 2;
}

message UpdateFileResponse {
    GenericReply response = 1;
    repeated string datanode_addr = 2;
}

message DeleteFileResponse {
    GenericReply response = 1;
    repeated string datanode_addr = 2;
}

message ReadFileResponse {
    GenericReply response = 1;
    repeated string datanode_addr = 2;
}
